# Secure Token API
Java Spring Boot приложение с безопасной аутентификацией на основе JWT.

## Описание
Проект реализует защищённую авторизацию с использованием шифрования и подписи токенов.
Токены содержат чувствительную информацию и передаются по незащищённому каналу, но защищены на уровне приложения.

## Особенности
- **Полная защита токенов: шифрование (JWE) + подпись (JWS)**
- **Отзыв токенов через Redis (access) и БД (refresh)**
- **Поддержка регистрации и входа**
- **Обновление токенов через refresh-токен**
- **Работа без HTTPS — криптография на уровне приложения**
- **Документация через Swagger UI**

## Технологии
- Java 17
- Spring Boot 3 
- Spring Security
- JWT (JWE + JWS) через Nimbus JOSE + JWT
- PostgreSQL — хранение пользователей и refresh-токенов
- Redis — чёрный список access-токенов
- Flyway — миграции БД
- Lombok, Validation, Swagger

## Безопасность
- **JWE (JSON Web Encryption)** — шифрование токена асимметричным ключом (RSA-OAEP-256)
- **JWS (JSON Web Signature)** — подпись токена (RS256)
- Только сервер может подписывать и расшифровывать
- Защита от подмены даже участниками обмена
- Чувствительные данные в токене (роли, jti) зашифрованы

## API
- **POST /api/auth/register** — регистрация нового пользователя
- **POST /api/auth/login** — вход, возвращает access и refresh токены
- **POST /api/auth/refresh** — обновление access-токена
- **POST /api/auth/logout** — выход, отзыв токенов
- **GET /api/user** — данные текущего пользователя
- **GET /api/admin** — доступ только для администраторов

## Запуск
1. Установить PostgreSQL и Redis
2. Запустить Redis: redis-server
3. Настроить подключение к БД в application-db.properties
4. Запустить приложение: mvn spring-boot:run
5. Открыть Swagger: http://localhost:8080/swagger-ui/index.html